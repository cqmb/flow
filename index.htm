<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>æ–°å¹´å¿«ä¹</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: black;
    }
    canvas {
      display: block;
    }
    .message-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      justify-content: space-between; /* å·¦å³åˆ†å¸ƒ */
      width: 80%;  /* æ§åˆ¶æ•´ä½“å®½åº¦ */
      text-align: center;
      z-index: 9999;
      pointer-events: none;
    }
    .message {
      color: white;
      font-size: 24px;
      font-family: 'Arial', sans-serif;
      font-weight: bold;
      margin-bottom: 10px;
      opacity: 1;
      animation: fadeIn 1s forwards, fadeOut 3s 3s forwards;
      pointer-events: none;
      display: block;
      white-space: nowrap;  /* Prevent text wrapping */
    }
    .left-column, .right-column {
      width: 45%;  /* æ¯åˆ—å®½åº¦ */
    }
    @keyframes fadeIn {
      0% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }
    @keyframes fadeOut {
      0% {
        opacity: 1;
      }
      100% {
        opacity: 0;
      }
    }
  </style>
</head>
<body>
<canvas id="fireworkCanvas"></canvas>
<div class="message-container"></div>

<!-- èƒŒæ™¯éŸ³ä¹ -->
<audio id="backgroundMusic" src="å‘¨æ°ä¼¦ - èŠ±æµ·.mp3" preload="auto" loop></audio>

<!-- çƒŸèŠ±çˆ†ç‚¸éŸ³æ•ˆ -->
<audio id="fireworkSound" src="072007_fireworks-47593.mp3" preload="auto"></audio>

<script>
  const canvas = document.getElementById('fireworkCanvas');
  const ctx = canvas.getContext('2d');
  const messageContainer = document.querySelector('.message-container');

  const message = "ææ­£èˆªğŸ’–ç‹ç‰èŠ±ï¼Œå¹³å®‰å–œä¹ï¼Œç¥ä½ ç¥æˆ‘ç¥æˆ‘ä»¬";  // æ–‡å­—å†…å®¹ç›´æ¥å†™æˆä¸€ä¸ªå­—ç¬¦ä¸²

  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  // é€šè¿‡ç‚¹å‡»æ’­æ”¾éŸ³é¢‘
  const backgroundMusic = document.getElementById('backgroundMusic');
  const fireworkSound = document.getElementById('fireworkSound');

  // éšæœºæ•°ç”Ÿæˆå™¨
  function random(min, max) {
    return Math.random() * (max - min) + min;
  }

  // éšæœºç”Ÿæˆé¢œè‰²
  function randomColor() {
    const r = Math.floor(random(150, 255));
    const g = Math.floor(random(150, 255));
    const b = Math.floor(random(150, 255));
    return `rgba(${r}, ${g}, ${b}, 1)`;  // æ¯æ¬¡ç‚¹å‡»ä¼šå¾—åˆ°ä¸åŒçš„é¢œè‰²
  }

  // çƒŸèŠ±æ„é€ å‡½æ•°
  function Firework(x, y) {
    this.x = x;
    this.y = y;
    this.size = random(5, 7);  // çƒŸèŠ±çš„åˆå§‹å¤§å°
    this.particles = [];
    this.isExploded = false;  // æ˜¯å¦å·²ç»çˆ†ç‚¸
    this.vy = -6;  // ä¸Šå‡çš„é€Ÿåº¦
    this.gravity = 0.1;  // é‡åŠ›ï¼Œä½¿çƒŸèŠ±é€æ¸å‡é€Ÿ
    this.color = randomColor();  // äº§ç”Ÿéšæœºé¢œè‰²
    this.maxHeight = random(20, 50);  // çƒŸèŠ±ä¸Šå‡çš„æœ€å¤§é«˜åº¦
    this.initialY = y;  // ä¿å­˜åˆå§‹ä½ç½®
  }

  // ç»˜åˆ¶çƒŸèŠ±ç²’å­
  Firework.prototype.draw = function () {
    if (this.isExploded) {
      this.particles.forEach(p => {
        ctx.globalAlpha = p.alpha;
        ctx.fillStyle = p.color;  // ç²’å­é¢œè‰²
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        ctx.fill();
      });
    } else {
      // ç»˜åˆ¶ä¸Šå‡çš„çƒŸèŠ±
      ctx.globalAlpha = 1;
      ctx.fillStyle = this.color;
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fill();
    }
  };

  // æ›´æ–°çƒŸèŠ±çŠ¶æ€
  Firework.prototype.update = function () {
    if (!this.isExploded) {
      this.y += this.vy;  // çƒŸèŠ±ä¸Šå‡
      this.vy += this.gravity;  // å—é‡åŠ›å½±å“ï¼Œé€Ÿåº¦é€æ¸å‡ç¼“

      // åˆ°è¾¾æœ€å¤§é«˜åº¦åçˆ†ç‚¸
      if (this.y <= this.initialY - this.maxHeight) {
        this.explode();
      }
    } else {
      this.particles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        p.alpha -= 0.02;  // ç²’å­é€æ¸æ¶ˆå¤±
      });
      this.particles = this.particles.filter(p => p.alpha > 0);  // ç§»é™¤é€æ˜ç²’å­
    }
  };

  // çƒŸèŠ±çˆ†ç‚¸
  Firework.prototype.explode = function () {
    const particleCount = 1000;  // å¢åŠ ç²’å­æ•°é‡
    for (let i = 0; i < particleCount; i++) {
      const angle = random(0, Math.PI * 2);  // éšæœºè§’åº¦
      const speed = random(4, 10);  // å¢åŠ çˆ†ç‚¸çš„é€Ÿåº¦

      const vx = Math.cos(angle) * speed;
      const vy = Math.sin(angle) * speed;

      this.particles.push({
        x: this.x,
        y: this.y,
        vx: vx,
        vy: vy,
        size: random(2, 5),   // ç²’å­å¤§å°
        alpha: 1,
        color: this.color  // ä½¿ç”¨ç›¸åŒçš„é¢œè‰²
      });
    }
    this.isExploded = true;  // æ ‡è®°ä¸ºå·²çˆ†ç‚¸

    // æ’­æ”¾çƒŸèŠ±çˆ†ç‚¸çš„å£°éŸ³
    fireworkSound.play();  // æ’­æ”¾éŸ³æ•ˆ
  };

  const fireworks = [];

  // è‡ªåŠ¨æ’­æ”¾çƒŸèŠ±æ•ˆæœ
  // è‡ªåŠ¨æ’­æ”¾çƒŸèŠ±æ•ˆæœ
  function triggerFireworks() {
    // è§¦å‘çƒŸèŠ±ï¼Œyåæ ‡ä¿®æ”¹ä¸ºé¡µé¢é«˜åº¦çš„ä¸­é—´ä½ç½®
    fireworks.push(new Firework(random(100, window.innerWidth - 100), window.innerHeight / 2));  // æ”¹ä¸ºwindow.innerHeight / 2
  }


  // ç”Ÿæˆéšæœºä½ç½®çš„æ¶ˆæ¯
  function generateRandomMessage() {
    const messageElement = document.createElement('div');
    messageElement.classList.add('message');

    // åˆ›å»ºå·¦å³ä¸¤åˆ—ï¼Œåˆ†åˆ«æ˜¾ç¤ºåå­—å’Œç¥ç¦
    const leftColumn = document.createElement('div');
    leftColumn.classList.add('left-column');
    leftColumn.textContent = "ç‹ç‰èŠ±";  // è¿™é‡Œå¡«å†™åå­—éƒ¨åˆ†

    const rightColumn = document.createElement('div');
    rightColumn.classList.add('right-column');
    rightColumn.textContent = "å¹³å®‰å–œä¹ï¼Œç¥ä½ ç¥æˆ‘ç¥æˆ‘ä»¬";  // è¿™é‡Œå¡«å†™ç¥ç¦éƒ¨åˆ†

    // å°†åå­—åˆ—å’Œç¥ç¦åˆ—æ”¾å…¥æ¶ˆæ¯å…ƒç´ 
    messageElement.appendChild(leftColumn);
    messageElement.appendChild(rightColumn);

    messageElement.style.position = 'absolute';

    // éšæœºè®¾ç½®æ–‡å­—çš„æ˜¾ç¤ºä½ç½®
    messageElement.style.left = `${random(0, window.innerWidth - 10)}px`;  // éšæœºXåæ ‡ï¼Œä¿è¯ä¸ä¼šè¶…å‡ºå±å¹•
    messageElement.style.top = `${random(0, window.innerHeight - 10)}px`;  // éšæœºYåæ ‡ï¼Œä¿è¯ä¸ä¼šè¶…å‡ºå±å¹•

    messageContainer.appendChild(messageElement);  // å°†æ¶ˆæ¯æ·»åŠ åˆ°å®¹å™¨ä¸­

    // è®¾ç½®æ–‡å­—æ¶ˆå¤±çš„å®šæ—¶å™¨ï¼ˆ3ç§’åæ¶ˆå¤±ï¼‰
    setTimeout(() => {
      messageElement.style.opacity = 0;
      setTimeout(() => {
        messageContainer.removeChild(messageElement);
      }, 1000); // å»¶æ—¶1ç§’åç§»é™¤æ–‡å­—å…ƒç´ 
    }, 3000); // 3ç§’åå¼€å§‹æ¶ˆå¤±
  }

  // è‡ªåŠ¨å¯åŠ¨æ‰€æœ‰æ•ˆæœ
  function startAllEffects() {
    backgroundMusic.play();  // æ’­æ”¾èƒŒæ™¯éŸ³ä¹
    for (let i = 0; i < 5; i++) {
      setInterval(triggerFireworks, 1000);  // æ¯éš”5ç§’è§¦å‘ä¸€æ¬¡çƒŸèŠ±
      setInterval(generateRandomMessage, 1000);  // æ¯éš”5ç§’ç”Ÿæˆä¸€æ¡ç¥ç¦æ¶ˆæ¯
    }





  }

  // é¡µé¢åŠ è½½åè‡ªåŠ¨å¼€å§‹
  window.onload = function() {
    startAllEffects();
  };

  // åŠ¨ç”»å¾ªç¯
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    fireworks.forEach((fw, i) => {
      fw.update();
      fw.draw();
      if (fw.particles.length === 0 && fw.isExploded) {
        fireworks.splice(i, 1);  // æ¸…é™¤å·²ç»çˆ†ç‚¸å¹¶ä¸”ç²’å­ä¸ºç©ºçš„çƒŸèŠ±
      }
    });
    requestAnimationFrame(animate);  // é‡å¤åŠ¨ç”»
  }

  animate();
</script>

</body>
</html>
